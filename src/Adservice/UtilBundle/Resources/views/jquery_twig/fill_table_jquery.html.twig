<script>
//Funciones para el autorellenado de los combos de campos de coches de los formularios

    $(document).ready(function() {

        {% if workshop is defined and workshop.id == "" %} tickets_ajax(); {% else %} tickets_from_workshop_ajax(); {% endif %}
    });

    {% if workshop is defined and workshop.id == "" %}

            $('#slct_historyTickets').click(function() {
                $('#page').val(1);
                tickets_ajax();
            });

            $('#btn_search').click(function() {
                $('#page').val(1);
                tickets_ajax();
            });

            function tickets_ajax() {
                var locale   = $(document).find("#data_locale").val();
                var url_show = Routing.generate('showTicket'  , {_locale: locale, id_ticket: 'PLACEHOLDER' });
                var url_ajax = Routing.generate('fill_tickets', {_locale: locale});

                fill_tickets(url_ajax, url_show);
            }
    {% else %}
            $('#btn_search').click(function() {
                $('#page').val(1);

                tickets_from_workshop_ajax();
            });

            function tickets_from_workshop_ajax() {
                var locale = $(document).find("#data_locale").val();
                var url_show = Routing.generate('showTicket'  , {_locale: locale, id_ticket: 'PLACEHOLDER' });
                var url_ajax = Routing.generate('tickets_from_workshop', {_locale: locale});
                var user = "{{ app.security.getToken().getUser().getId() }}";

                fill_tickets_from_workshop(url_ajax, url_show, user);
            }
    {% endif %}

</script>