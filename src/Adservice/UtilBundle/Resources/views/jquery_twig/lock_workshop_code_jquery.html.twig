
<script>

	$(document).ready(function() {
		$( "#flt_socio" ).focus();
        {% if id_socio  != 'none' %} $("#flt_socio" ).val('{{ id_socio }}' );{% endif %}
        {% if id_taller != 'none' %} $("#flt_taller").val('{{ id_taller }}');{% endif %}
        //util.js
        table_filter();
	});

	function codeNumeric(){
		if (!$.isNumeric($( "#flt_taller" ).val()) || !$.isNumeric($( "#flt_socio" ).val())) {
			event.preventDefault();
			alert('{% trans %} error.numeric {% endtrans %}');
		}else{
            list_incidences();
        }
	}

    function list_incidences() {
        var id_socio  = $('#flt_socio' ).val();
        var id_taller = $('#flt_taller').val();

        if( id_socio  == null ) id_socio  = 'none';
        if( id_taller == null ) id_taller = 'none';

        var url = "{{ path('list_incidences', { 'page': 'plc_page', 'id_taller' : 'plc_taller', 'id_socio' : 'plc_socio' }) }}";

        url = url.replace("plc_page", 1);
        url = url.replace("plc_socio" , id_socio );
        url = url.replace("plc_taller", id_taller);

        window.open(url, "_self");
    }

	$( "#flt_socio" ).on( "keydown", function( event ) {

		if (event.which == 13) {
		  	event.preventDefault();
		  	$( "#flt_taller" ).focus();
		}
	});

	$( "#flt_taller" ).on( "keydown", function( event ) {

	  	if (event.which == 13) {
	  		if ($( "#flt_socio" ).val() == "") {
		  		event.preventDefault();
				$( "#flt_socio" ).focus();
				$( "#lbl_code" ).html("{% trans %} code.partner {% endtrans %}");
			}else{
	  			codeNumeric();
	  		}
	  	}
	});

    //REDIRIGE A LA PAGINA EN LA QUE SE HAYA HECHO CLICK
    $('#btn_search').click(function() {

        if ($( "#flt_taller" ).val() == "" || $( "#flt_socio" ).val() == "") {
            event.preventDefault();
            $( "#flt_socio" ).focus();
            $( "#lbl_code" ).html("{% trans %} code.partner {% endtrans %}");
        }else{
            codeNumeric();
        }
    });

</script>