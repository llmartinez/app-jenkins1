
<script>
	$(document).ready(function() {

		$("#slct_region").change(function() {
			$(':text[id*=region]').val( $("#s2id_slct_region .select2-chosen").text() );

			var url_ajax = "{{ path("cities_from_region") }}";
			populate_city(url_ajax);
		});

		$("#slct_city").change(function(){
			$(':text[id*=city]').val( $("#s2id_slct_city .select2-chosen").text() );
		});

		$("#slct_city").select2();
            if($(':text[id*=city]').val()   != '') $("#s2id_slct_city .select2-chosen").text($(':text[id*=city]').val());
            else                                   $(':text[id*=city]').val( $("#s2id_slct_city .select2-chosen").text('sin ciudad') );

            {% if partner       is defined %} {% set entity = partner       %} {% endif %}
            {% if shop          is defined %} {% set entity = shop          %} {% endif %}
            {% if workshop      is defined %} {% set entity = workshop      %} {% endif %}
            {% if user          is defined %} {% set entity = user          %} {% endif %}
            {% if shopOrder     is defined %} {% set entity = shopOrder     %} {% endif %}
            {% if workshopOrder is defined %} {% set entity = workshopOrder %} {% endif %}

            {% if entity.region != '' %}
                                          $("#s2id_slct_region .select2-chosen").text("{{ entity.region }}");
                                          $(':text[id*=region]').val('{{ entity.region }}');    {% endif %}

            {% if entity.city   != '' %} $("#s2id_slct_city .select2-chosen"  ).text("{{ entity.city }}"  );
                                          $(':text[id*=city]'  ).val('{{ entity.city }}');      {% endif %}
		$('#btn_create').click(function(){

			if ($(':text[id*=region]').val() == "[object Object]"){

				alert('Debes introducir la region');
		        event.preventDefault();
		        event.stopPropagation();
			}
			else{

				if ($(':text[id*=city]').val() == "[object Object]"){

				alert('Debes introducir la ciudad');
			        event.preventDefault();
			        event.stopPropagation();
			    }
			}
		});
	});

</script>