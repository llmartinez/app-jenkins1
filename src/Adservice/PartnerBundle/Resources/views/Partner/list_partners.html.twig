{% extends '::layout.html.twig' %}

{% block body %}
    {# Definicion de la ruta al listado para usar en paginacion #}
    {% set route = 'partner_list' %}

    <ol class="breadcrumb">
      <li><a href="{{ path('user_index') }}">{% trans %} home {% endtrans %}</a></li>
      <li class="active">{% trans %} menu.list_partners {% endtrans %}</li>
    </ol>

<legend>
    {% trans %} menu.list_partners {% endtrans %}
    <a href="{{ path('partner_new') }}" class="btn btn-primary"><img class="img_icon" src="{{ asset('bundles/util/images/icon/add.png') }}"> {% trans %} new.partner {% endtrans %} </a>
</legend>

    {% if is_granted('ROLE_SUPER_ADMIN') %}
    <div class="col-xs-3 col-md-3 form-group"> <label> {% trans %} country {% endtrans %} </label>
        <select id="flt_country" class='form-control'>
                <option value="none">{% trans %} all {% endtrans %}</option>
            {% for country in countries %}
                <option value="{{ country.id }}">{{ country | trans }}</option>
            {% endfor %}
    </select></div>
    {% endif %}

    {% if all_partners|length > 0  %}
    <table class="table table-hover table-list-search" style="width: 90%; margin-left: 5%;">
        <thead>
            <tr>
                <th>#</th>
                <th>{% trans %} name            {% endtrans %}</th>
                <th>{% trans %}                 {% endtrans %}</th>
                <th>{% trans %} phone_number_1  {% endtrans %}</th>
                <th>{% trans %} email_1         {% endtrans %}</th>
                <th>{% trans %} region          {% endtrans %}</th>
                <th>{% trans %} city            {% endtrans %}</th>
                <th>{% trans %} actions         {% endtrans %}</th>
            </tr>
        </thead>
        <tbody>
                {% for partner in all_partners %}
            <tr>
                <td>{{ partner.codePartner }}</td>
                <td>{{ partner.name        }}</td>
                <td>{% if partner.active == false %}<span class="label label-danger">{% trans %} inactive {% endtrans %}</span>{% endif %}</td>
                <td>{{ partner.phoneNumber1}}</td>
                <td>{{ partner.email1  }}</td>
                <td>{{ partner.region  }}</td>
                <td>{{ partner.city    }}</td>
                <td>
                    <a id="edit{{ partner.name }}" href="{{ path("partner_edit", { 'id':partner.id }) }}"><img class="img_icon" src="{{ asset('bundles/util/images/icon/pencil.png') }}"></a>
                </td>
            </tr>
                {% endfor %}
        </tbody>
    </table>

    {% include 'UtilBundle:Pagination:pagination.html.twig' %}

    {% else %}
        {% trans %} any.partner {% endtrans %}
    {% endif %}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/util/js/pagination.js') }}"></script>
    <script src="{{ asset('bundles/partner/js/partner.js') }}"></script>
    <script src="{{ asset('bundles/util/js/util.js') }}"></script>
    <script>
        $(document).ready(function() {
            {% if country != 'none' %} $("#flt_country").val('{{ country }}');{% endif %}
        });
    </script>
{% endblock %}