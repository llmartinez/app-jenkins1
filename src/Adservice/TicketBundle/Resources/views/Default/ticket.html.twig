{% extends "::layout.html.twig" %}

{% block body %}

<!-- TABLA TICKETS -->

<div class="colIzq">
    <div class="widget stacked widget-table action-table">
    				
        <div class="widget-header">
                <i class="icon-th-list"></i>
                <h3>Historial Tickets</h3>
        </div> <!-- /widget-header -->

        <div class="widget-content" >

            <table class="table table-striped table-bordered">
                
                {% if tickets | length == 0 %}
                
                    <tr><td>No tienes ningun ticket abierto</td></tr>
                    
                {% else %}
                    
                    <thead>
                        <tr>
                            <th>{% trans %}Fecha{% endtrans %}</th>
                            <th>{% trans %}Taller{% endtrans %}</th>
                            <th>{% trans %}Ticket{% endtrans %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for ticket in tickets %}
                            
                            {% if (ticket.createdBy.id == app.security.getToken().getUser().getId()) or is_granted('ROLE_ADMIN') %}
                            
                            <tr>
                                <td>{{ ticket.createdAt | date("d/m/Y") }}</td>
                                <td>{{ ticket.createdBy.username | length > 9 ?  ticket.createdBy.username | slice(0, 9) ~ '...' : ticket.createdBy.username }}</td>
                                <td>
                                    <a href="{{ path('showTicket', { 'id_ticket' : ticket.id }) }}"> 

                                        <b style='color:black'>#{{ ticket.id }}:</b> 
                                      
                                        {{ ticket.title | length > 19 ?  ticket.title | slice(0, 19) ~ '...' : ticket.title }} 

                                    </a>
                                </td>
                            </tr>
                            {% endif %}
                        {% endfor %}
                    </tbody>
                {% endif %}
            </table>
        </div> <!-- /widget-content -->
    </div> <!-- /widget -->
</div>

<!-- CONTENIDO PAGINA TICKETS -->

<div class="colDer">
    {% block content %}{% endblock  %}
</div>
    
{% endblock %}
